# APK Manager - Self-hosted Supabase Configuration
# Zkopíruj tento soubor jako .env a vyplň vlastní hodnoty

# === Application Ports ===
APP_PORT=3000
KONG_HTTP_PORT=8000
KONG_HTTPS_PORT=8443
STUDIO_PORT=3010
POSTGRES_PORT=5432

# === Database Configuration ===
POSTGRES_USER=supabase
POSTGRES_PASSWORD=your-super-secret-password-change-me
POSTGRES_DB=postgres

# === JWT Configuration ===
# KRITICKÉ: Vygeneruj silné JWT secret pomocí: openssl rand -hex 32
JWT_SECRET=your-super-secret-jwt-token-with-at-least-32-characters-long
JWT_EXPIRY=3600

# === Supabase API Keys ===
# KRITICKÉ: Vygeneruj pomocí níže uvedených příkazů

# Anon key (veřejný klíč pro frontend)
# Vygeneruj pomocí: node -e "console.log(require('jsonwebtoken').sign({role:'anon',iss:'supabase'},process.argv[1],{expiresIn:'10y'}))" "your-jwt-secret"
ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFwa21hbmFnZXIiLCJyb2xlIjoiYW5vbiIsImlhdCI6MTY0MjU0MTYwMCwiZXhwIjoxOTU4MTE3NjAwfQ.6xKV4Ug8XF1jZeQPFJPHCPdF_8x1jYX8x7x8x7x8x7x

# Service role key (privátní klíč pro backend)
# Vygeneruj pomocí: node -e "console.log(require('jsonwebtoken').sign({role:'service_role',iss:'supabase'},process.argv[1],{expiresIn:'10y'}))" "your-jwt-secret"
SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFwa21hbmFnZXIiLCJyb2xlIjoic2VydmljZV9yb2xlIiwiaWF0IjoxNjQyNTQxNjAwLCJleHAiOjE5NTgxMTc2MDB9.6xKV4Ug8XF1jZeQPFJPHCPdF_8x1jYX8x7x8x7x8x7x

# === Auth Configuration ===
SITE_URL=http://localhost:3000
SUPABASE_PUBLIC_URL=http://localhost:8000
ADDITIONAL_REDIRECT_URLS=
DISABLE_SIGNUP=false
ENABLE_EMAIL_SIGNUP=true
ENABLE_EMAIL_AUTOCONFIRM=true

# === SMTP Configuration (optional) ===
SMTP_ADMIN_EMAIL=admin@apkmanager.local
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_SENDER_NAME=APK Manager

# === Studio Configuration ===
STUDIO_DEFAULT_ORGANIZATION=APK Manager
STUDIO_DEFAULT_PROJECT=APK Manager

# === Storage Configuration ===
PGRST_DB_SCHEMAS=public,storage,graphql_public

# === System Configuration ===
TZ=Europe/Prague

# =======================================
# GENEROVÁNÍ JWT KEYS
# =======================================

# 1. Nainstaluj Node.js a jsonwebtoken:
#    npm install -g jsonwebtoken

# 2. Vygeneruj JWT_SECRET:
#    openssl rand -hex 32

# 3. Vygeneruj ANON_KEY (nahraď YOUR_JWT_SECRET):
#    node -e "console.log(require('jsonwebtoken').sign({role:'anon',iss:'supabase'},process.argv[1],{expiresIn:'10y'}))" "YOUR_JWT_SECRET"

# 4. Vygeneruj SERVICE_ROLE_KEY (nahraď YOUR_JWT_SECRET):
#    node -e "console.log(require('jsonwebtoken').sign({role:'service_role',iss:'supabase'},process.argv[1],{expiresIn:'10y'}))" "YOUR_JWT_SECRET"

# =======================================
# POZNÁMKY K NASAZENÍ
# =======================================

# 1. Zkopíruj tento soubor jako .env
# 2. Vygeneruj všechny secrets (JWT_SECRET, ANON_KEY, SERVICE_ROLE_KEY)
# 3. Nastav POSTGRES_PASSWORD na silné heslo
# 4. Spusť: docker-compose -f docker-compose.supabase.yml up -d
# 5. Frontend: http://localhost:3000
# 6. Supabase Studio: http://localhost:3010
# 7. Default login: admin@apkmanager.local / admin123
